### ë“±ë¡/ìˆ˜ì •/ì¡°íšŒ API ë§Œë“¤ê¸°

**Spring ì›¹ ê³„ì¸µêµ¬ì¡°**

- APIë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„  3ê°œì˜ í´ë˜ìŠ¤ê°€ í•„ìš”
    - Request ë°ì´í„°ë¥¼ ë°›ì„ DTO
    - API ìš”ì²­ì„ ë°›ì„ Controller
    - íŠ¸ëœì­ì…˜, ë„ë©”ì¸ ê¸°ëŠ¥ ê°„ì˜ ìˆœì„œë¥¼ ë³´ì¥í•˜ëŠ” Service
- Serviceì—ì„œ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ **íŠ¸ëœì­ì…˜, ë„ë©”ì¸ ê°„ ìˆœì„œ ë³´ì¥ì˜ ì—­í• **ë§Œ í•¨
- Spring ì›¹ ê³„ì¸µ

  ![Spring ì›¹ ê³„ì¸µ](img/3_SpringWebLayer.png)

    - Web Layer
        - í”íˆ ì‚¬ìš©í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬, JSP / Freemarker ë“±ì˜ ë·° í…œí”Œë¦¿ ì˜ì—­
        - ì´ì™¸ì—ë„ í•„í„°, ì¸í„°ì…‰í„°, ì»¨íŠ¸ë¡¤ëŸ¬ ì–´ë“œë°”ì´ìŠ¤ ë“± ì™¸ë¶€ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì „ë°˜ì ì¸ ì˜ì—­
    - Service Layer
        - `@Service`ì— ì‚¬ìš©ë˜ëŠ” ì„œë¹„ìŠ¤ ì˜ì—­
        - ì¼ë°˜ì ìœ¼ë¡œ Controllerì™€ Daoì˜ ì¤‘ê°„ ì˜ì—­ì—ì„œ ì‚¬ìš©
        - `@Transactional`ì´ ì‚¬ìš©ë˜ì–´ì•¼ í•˜ëŠ” ì˜ì—­
    - Repository Layer
        - Databaseì™€ ê°™ì´ ë°ì´í„° ì €ì¥ì†Œì— ì ‘ê·¼í•˜ëŠ” ì˜ì—­
        - Dao ê°œë…ìœ¼ë¡œ ì´í•´í•˜ë©´ ì‰½ë‹¤
    - DTOs
        - DTO(Data Transfer Object)ëŠ” **ê³„ì¸µ ê°„ì— ë°ì´í„° êµí™˜ì„ ìœ„í•œ ê°ì²´**, DTOsëŠ” ì´ë“¤ì˜ ì˜ì—­
        - ë·° í…œí”Œë¦¿ ì—”ì§„ì—ì„œì‚¬ìš©ë  ê°ì²´ë‚˜ Repository Layerì—ì„œ ê²°ê³¼ë¡œ ë„˜ê²¨ì¤€ ê°ì²´ ë“±ì„ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆë‹¤
    - Domain Model
        - ë„ë©”ì¸ì´ë¼ ë¶ˆë¦¬ëŠ” ê°œë°œ ëŒ€ìƒì„ ëª¨ë“  ì‚¬ëŒë“¤ì´ ë™ì¼í•œ ê´€ì ì—ì„œ ì´í•´í•  ìˆ˜ ìˆê³  ê³µìœ í•  ìˆ˜ ìˆë„ë¡ ë‹¨ìˆœí™”ì‹œí‚¨ ê²ƒ
        - íƒì‹œ ì•±ì„ ì˜ˆë¡œ ë“¤ë©´ ë°°ì°¨, íƒ‘ìŠ¹, ìš”ê¸ˆ ë“±ì´ ëª¨ë‘ ë„ë©”ì¸ì´ ë  ìˆ˜ ìˆìŒ
        - `@Entity`ê°€ ì‚¬ìš©ëœ ì˜ì—­ë„ ë„ë©”ì¸ ëª¨ë¸
        - VOê°™ì€ ê°’ ê°ì²´ë“¤ë„ ì´ ì˜ì—­ì— í•´ë‹¹ë˜ê¸° ë•Œë¬¸ì—, **ë¬´ì¡°ê±´ ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸”ê³¼ ê´€ê³„ê°€ ìˆì–´ì•¼ë§Œ í•˜ëŠ” ê²ƒì€ ì•„ë‹˜**
    - " ì´ ë‹¤ì„¯ê°€ì§€ ë ˆì´ì–´ ì¤‘ì— ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ë‹´ë‹¹í•´ì•¼í•˜ëŠ” ê³³ì€ **Domain** "
- ê¸°ì¡´ì˜ ì„œë¹„ìŠ¤ ì²˜ë¦¬ ë°©ì‹ : **íŠ¸ëœì­ì…˜ ìŠ¤í¬ë¦½íŠ¸**
    - ìŠˆë„ ì½”ë“œ
  ```java
  @Transcational
  public Order cancleOrder(int orderId) {
      1) ë°ì´í„°ë² ì´ìŠ¤ë¡œë¶€í„° ì£¼ë¬¸ì •ë³´ (Orders), ê²°ì œì •ë³´ (Billing), ë°°ì†¡ì •ë³´(Delivery) ì¡°íšŒ
          
      2) ë°°ì†¡ ì·¨ì†Œë¥¼ í•´ì•¼ í•˜ëŠ”ì§€ í™•ì¸
      
      3) if(ë°°ì†¡ì¤‘ì´ë¼ë©´) {
        ë°°ì†¡ ì·¨ì†Œë¡œ ë³€ê²½
      }
      
      4) ê° í…Œì´ë¸”ì— ì·¨ì†Œ ìƒíƒœ Update
  }
  ```
    - ì‹¤ì œ ì½”ë“œ
  ```java
  @Transcational
  public Order cancleOrder(int orderId) {
      // 1) 
      OrderDTO order = ordersDao.selectOrders(orderId);
      BillingDTO billing = billingDao.selectBilling(orderId);   
      DeliveryDTO delivery = deliveryDao.selectDelivery(orderId);
  
      // 2) 
      String deliveryStatus = delivery.getStatus();
  
      // 3)
      if("IN_PROGRESS".equals(deliveryStatus)) {
        delivery.setStatus("CANCLE");
        deliveryDao.update(delivery);
      }
      
      // 4) 
      order.setStatus("CANCLE");
      ordersDao.update(order);
  
      billing.setStatus("CANCLE");
      deliveryDao.update(billing);
  
      return order;
  }
  ```
    - ëª¨ë“  ë¡œì§ì´ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬
    - **ì„œë¹„ìŠ¤ ê³„ì¸µì´ ë¬´ì˜ë¯¸í•˜ë©°, ê°ì²´ë€ ë‹¨ìˆœíˆ ë°ì´í„° ë©ì–´ë¦¬** ì—­í• ë§Œ í•˜ê²Œ ë¨
- ë„ë©”ì¸ ëª¨ë¸ì—ì„œ ì²˜ë¦¬í•  ê²½ìš°
  ```java
  @Transcational
  public Order cancleOrder(int orderId) {
      // 1) 
      Orders order = ordersRepository.findById(orderId);
      Billing billing = billingRepository.findByOrderId(orderId);
      Delivery delivery = deliveryRepository.findByOrderId(orderId);
  
      // 2 - 3)
      delivery.cancle();
      
      // 4) 
      order.cancle();
      billing.cancle();
  
      return order;
  }
  ```
    - order, billing, delivery ê°ì ë³¸ì¸ì˜ ì·¨ì†Œ ì´ë²¤íŠ¸ ì²˜ë¦¬
    - ì„œë¹„ìŠ¤ ë©”ì†Œë“œëŠ” **íŠ¸ëœì­ì…˜ê³¼ ë„ë©”ì¸ ê°„ì˜ ìˆœì„œë§Œ ë³´ì¥**

<br>

**ë“±ë¡ API**

- PostsApiController

```java
package com.chochozabe.springboot.web;

import com.chochozabe.springboot.service.PostsService;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

@RequiredArgsConstructor
@RestController
public class PostsApiController {

    private final PostsService postsService;

    @PostMapping("/api/v1/posts")
    public Long save(@RequestBody PostsSaveRequestDTO requestDTO) {
        return postsService.save(requestDTO);
    }

}
```

- PostService

```java
package com.chochozabe.springboot.service;

import com.chochozabe.springboot.domain.posts.PostsRepository;
import com.chochozabe.springboot.dto.PostsSaveRequestDTO;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;

@RequiredArgsConstructor
@Service
public class PostsService {
    private final PostsRepository postsRepository;

    public Long save(PostsSaveRequestDTO requestDTO) {
        return postsRepository.save(requestDTO.toEntity()).getId();
    }

}
```

- Springì—ì„œ Beanì„ ì£¼ì…ë°›ëŠ” ë°©ì‹
    - `@Autowired` `setter` `ìƒì„±ì`
    - ì´ ì¤‘ **ìƒì„±ìë¡œ ì£¼ì…**ë°›ëŠ” ë°©ì‹ì„ ê°€ì¥ ê¶Œì¥ (@Autowired ë¹„ê¶Œì¥)
    - ìƒì„±ìë¡œ Bean ê°ì²´ë¥¼ ë°›ë„ë¡í•˜ë©´ @Autowiredì™€ ë™ì¼í•œ íš¨ê³¼
    - í˜„ì¬ ì†ŒìŠ¤ì—ì„œëŠ” lombokì˜ **@RequiredArgsConstructor**ì—ì„œ **finalì´ ì„ ì–¸ëœ ëª¨ë“  í•„ë“œ**ë¥¼ ì¸ìê°’ìœ¼ë¡œ í•˜ëŠ” ìƒì„±ì ìƒì„± <br>

  > ìƒì„±ìë¥¼ ì§ì ‘ ì“°ì§€ì•Šê³  lombokì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
  >
  > í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì˜ì¡´ì„± ê´€ê³„ê°€ ë³€ê²½ë  ë–„ë§ˆë‹¤ ìƒì„±ì ì½”ë“œë¥¼ ê³„ì†í•´ì„œ ìˆ˜ì •í•˜ëŠ” ë²ˆê±°ë¡œì›€ì„ í•´ê²° <br>
  > í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì— ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜, ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œê±°í•˜ëŠ” ë“±ì˜ ìƒí™©ì´ ë°œìƒí•´ë„ ìƒì„±ì ì½”ë“œëŠ” ì†ëŒˆ í•„ìš”ê°€ ì—†ë‹¤.

- PostsSaveRequestDTO
    - Entity í´ë˜ìŠ¤ì™€ ìœ ì‚¬í•œ í˜•íƒœì§€ë§Œ ì ˆëŒ€ **Entity í´ë˜ìŠ¤ë¥¼ Request/Response í´ë˜ìŠ¤ë¡œ ì‚¬ìš©í•´ì„œëŠ” ì•ˆë¨**
    - Entity í´ë˜ìŠ¤ëŠ” **ë°ì´í„°ë² ì´ìŠ¤ì™€ ë§ë‹¿ì•„ì ¸ìˆëŠ” í•µì‹¬ í´ë˜ìŠ¤**ì´ê¸°ì— í™”ë©´ ì¶œë ¥ê°’ê°™ì€ ì‚¬ì†Œí•œ ê¸°ëŠ¥ ë³€ê²½ì„ ìœ„í•´ ì´ë¥¼ ë³€ê²½í•  ìˆœ ì—†ìŒ
    - **ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê²°ê³¼ê°’ìœ¼ë¡œ ì—¬ëŸ¬ í…Œì´ë¸”ì„ ì¡°ì¸í•´ì„œ ì¤˜ì•¼í•  ê²½ìš°ê°€ ë¹ˆë²ˆ**í•˜ë¯€ë¡œ View Layerì™€ DB Layerì˜ ì—­í•  ë¶„ë¦¬ë¥¼ ì² ì €í•˜ê²Œ í•˜ëŠ”ê²Œ ì¢‹ë‹¤.

```java
package com.chochozabe.springboot.dto;

import com.chochozabe.springboot.domain.posts.Posts;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;

@Getter
@NoArgsConstructor
public class PostsSaveRequestDTO {
    private String title;
    private String content;
    private String author;

    @Builder
    public PostsSaveRequestDTO(String title, String content, String author) {
        this.title = title;
        this.content = content;
        this.author = author;
    }

    public Posts toEntity() {
        return Posts.builder()
                .title(title)
                .content(content)
                .author(author)
                .build();
    }
}
```

- PostApiControllerTest
    - `@WebMvcTest`ì˜ ê²½ìš° JPA ê¸°ëŠ¥ì´ ë™ì‘í•˜ê¸° ì•Šê³  Controllerì™€ ControllerAdvice ë“± ì™¸ë¶€ ì—°ë™ê³¼ ê´€ë ¨ëœ ë¶€ë¶„ë§Œ í™œì„±í™”
    - JPA ê¸°ëŠ¥ê¹Œì§€ í•œë²ˆì— í…ŒìŠ¤íŠ¸í•  ë•ŒëŠ” `@SpringBootTest`ì™€ `TestRestTemplate`ë¥¼ ì‚¬ìš©

```java
package com.chochozabe.springboot.dto;

import com.chochozabe.springboot.domain.posts.Posts;
import com.chochozabe.springboot.domain.posts.PostsRepository;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.web.client.TestRestTemplate;
import org.springframework.boot.web.server.LocalServerPort;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.test.context.junit.jupiter.SpringExtension;

import java.util.List;

import static org.assertj.core.api.Assertions.assertThat;

@ExtendWith(SpringExtension.class)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
public class PostsApiControllerTest {

    @LocalServerPort
    private int port;

    @Autowired
    private TestRestTemplate restTemplate;

    @Autowired
    private PostsRepository postsRepository;

    @AfterEach
    public void tearDown() throws Exception {
        postsRepository.deleteAll();
    }

    @Test
    public void Posts_ë“±ë¡ëœë‹¤() throws Exception {
        // given
        String title = "title";
        String content = "content";

        PostsSaveRequestDTO requestDTO = PostsSaveRequestDTO.builder().title(title).content(content).build();

        String url = "http://localhost:" + port + "/api/v1/posts";

        // when
        ResponseEntity<Long> responseEntity = restTemplate.postForEntity(url, requestDTO, Long.class);

        // then
        assertThat(responseEntity.getStatusCode()).isEqualTo(HttpStatus.OK);
        assertThat(responseEntity.getBody()).isGreaterThan(0L);

        List<Posts> list = postsRepository.findAll();
        assertThat(list.get(0).getTitle()).isEqualTo(title);
        assertThat(list.get(0).getContent()).isEqualTo(content);

    }

}
```

<br>

**ìˆ˜ì •/ì¡°íšŒ API**

- PostsApiController

```java

@RequiredArgsConstructor
@RestController
public class PostsApiController {

  ...

    @PutMapping("/api/v1/posts/{id}")
    public Long update(@PathVariable Long id, @RequestBody PostsUpdateRequestDTO requestDTO) {
        return postsService.update(id, requestDTO);
    }

    @GetMapping("api/v1/post/{id}")
    public PostsResponseDTO findById(@PathVariable Long id) {
        return postsService.findById(id);
    }
}
```

- PostsResponseDTO
    - Entityì˜ í•„ë“œ ì¤‘ ì¼ë¶€ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ìƒì„±ìë¡œ Entityë¥¼ ë°›ì•„ í•„ë“œê°’ì— ì €ì¥

```java
package com.chochozabe.springboot.dto;

import com.chochozabe.springboot.domain.posts.Posts;
import lombok.Getter;

@Getter
public class PostsResponseDTO {
    private Long id;
    private String title;
    private String content;
    private String author;

    public PostsResponseDTO(Posts entity) {
        this.id = entity.getId();
        this.title = entity.getTitle();
        this.content = entity.getContent();
        this.author = entity.getAuthor();
    }
}
```

- PostsUpdateRequestDTO

```java
package com.chochozabe.springboot.dto;

import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;

@Getter
@NoArgsConstructor
public class PostsUpdateRequestDTO {

    private String title;
    private String content;

    @Builder
    public PostsUpdateRequestDTO(String title, String content) {
        this.title = title;
        this.content = content;
    }
}
```

- Posts

```java
package com.chochozabe.springboot.domain.posts;

import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;

import javax.persistence.*;

@Getter
@NoArgsConstructor
@Entity
public class Posts {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(length = 500, nullable = false)
    private String title;

    @Column(columnDefinition = "TEXT", nullable = false)
    private String content;

    private String author;

    @Builder
    public Posts(Long id, String title, String content, String author) {
        this.id = id;
        this.title = title;
        this.content = content;
        this.author = author;
    }

    public void update(String title, String content) {
        this.title = title;
        this.content = content;
    }
}
```

- PostsService

```java
package com.chochozabe.springboot.service;

import com.chochozabe.springboot.domain.posts.Posts;
import com.chochozabe.springboot.domain.posts.PostsRepository;
import com.chochozabe.springboot.dto.PostsResponseDTO;
import com.chochozabe.springboot.dto.PostsSaveRequestDTO;
import com.chochozabe.springboot.dto.PostsUpdateRequestDTO;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;

import javax.transaction.Transactional;

@RequiredArgsConstructor
@Service
public class PostsService {
    private final PostsRepository postsRepository;

    public Long save(PostsSaveRequestDTO requestDTO) {
        return postsRepository.save(requestDTO.toEntity()).getId();
    }

    @Transactional
    public Long update(Long id, PostsUpdateRequestDTO requestDTO) {
        Posts posts = postsRepository.findById(id)
                .orElseThrow(() -> new IllegalArgumentException("í•´ë‹¹ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤. id=" + id));

        posts.update(requestDTO.getTitle(), requestDTO.getContent());

        return id;
    }

    public PostsResponseDTO findById(Long id) {
        Posts entity = postsRepository.findById(id)
                .orElseThrow(() -> new IllegalArgumentException("í•´ë‹¹ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤. id=" + id));

        return new PostsResponseDTO(entity);
    }
}
```

- ìœ„ì˜ ìˆ˜ì • ì˜ˆì œë¥¼ ë³´ë©´ ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ” ë¶€ë¶„ì´ ì—†ë‹¤
    - JPAì˜ **ì˜ì†ì„± ì»¨í…ŒìŠ¤íŠ¸**ë•Œë¬¸
        - Entityë¥¼ ì˜êµ¬ ì €ì¥í•˜ëŠ” í™˜ê²½
        - JPAì˜ í•µì‹¬ ë‚´ìš©ì€ **ì—”í‹°í‹°ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— í¬í•¨ë˜ì–´ ìˆëƒ ì•„ë‹ˆëƒë¡œ** ê°ˆë¦¼
        - JPAì˜ ì—”í‹°í‹° ë§¤ë‹ˆì €ê°€ í™œì„±í™”ëœ ìƒíƒœë¡œ íŠ¸ëœì­ì…˜ ë‚´ì— ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ìœ ì§€ëœ ìƒíƒœ
        - ê·¸ ìƒíƒœì—ì„œ í•´ë‹¹ ë°ì´í„°ì˜ ê°’ì„ ë³€ê²½í•˜ë©´ íŠ¸ëœì­ì…˜ì´ ëë‚˜ëŠ” ì‹œì ì— í•´ë‹¹ í…Œì´ë¸”ì— ë°˜ì˜  (ì´ëŸ¬í•œ ê°œë…ì„ ë”í‹° ì²´í‚¹ì´ë¼ê³  í•œë‹¤)
    - ê²°ë¡ ì ìœ¼ë¡œ, **Entityì˜ ê°’ë§Œ ë³€ê²½í•˜ë©´ Update ì¿¼ë¦¬ë¥¼ ë‚ ë¦´ í•„ìš”ê°€ ì—†ë‹¤.**
- PostsApiControllerTest

```java
package com.chochozabe.springboot.dto;

import com.chochozabe.springboot.domain.posts.Posts;
import com.chochozabe.springboot.domain.posts.PostsRepository;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.web.client.TestRestTemplate;
import org.springframework.boot.web.server.LocalServerPort;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpMethod;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.test.context.junit.jupiter.SpringExtension;

import java.util.List;

import static org.assertj.core.api.Assertions.assertThat;

@ExtendWith(SpringExtension.class)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
public class PostsApiControllerTest {

    @LocalServerPort
    private int port;

    @Autowired
    private TestRestTemplate restTemplate;

    @Autowired
    private PostsRepository postsRepository;

    @AfterEach
    public void tearDown() throws Exception {
        postsRepository.deleteAll();
    }

    @Test
    public void Posts_ìˆ˜ì •ëœë‹¤() throws Exception {
        // given
        Posts savedPosts = postsRepository.save(Posts.builder().title("title").content("content").author("author").build());

        Long updateId = savedPosts.getId();
        ;
        String expectedTitle = "title2";
        String expectedContent = "content2";

        PostsUpdateRequestDTO requestDTO = PostsUpdateRequestDTO.builder().title(expectedTitle).content(expectedContent).build();

        String url = "http://localhost:" + port + "/api/v1/posts/" + updateId;

        HttpEntity<PostsUpdateRequestDTO> requestEntity = new HttpEntity<>(requestDTO);

        // when
        ResponseEntity<Long> responseEntity = restTemplate.exchange(url, HttpMethod.PUT, requestEntity, Long.class);

        // then
        assertThat(responseEntity.getStatusCode()).isEqualTo(HttpStatus.OK);
        assertThat(responseEntity.getBody()).isGreaterThan(0L);

        List<Posts> list = postsRepository.findAll();
        assertThat(list.get(0).getTitle()).isEqualTo(expectedTitle);
        assertThat(list.get(0).getContent()).isEqualTo(expectedContent);

    }
}
```

- H2 consoleì— ì ‘ê·¼í•˜ê¸°
    - H2ëŠ” ë©”ëª¨ë¦¬ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— **ì§ì ‘ ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„  ì›¹ ì½˜ì†”ì„ ì‚¬ìš©**í•´ì•¼í•œë‹¤.
    - application.propertiesì— ì˜µì…˜ ì¶”ê°€
   ```properties
   spring.h2.console.enabled=true
   ```
    - í”„ë¡œì íŠ¸ ì‹¤í–‰ ë’¤ http://localhost:8080/h2-console ë¡œ ì ‘ê·¼í•˜ë©´ ì›¹ ì½˜ì†” í™”ë©´ì´ ë‚˜íƒ€ë‚œë‹¤
    - JDBC URLì„ application.propertiesì— ì í˜€ìˆëŠ” ì£¼ì†Œì™€ ë™ì¼í•œì§€ í™•ì¸ í›„ connection ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ê´€ë¦¬ í˜ì´ì§€ë¡œ ì´ë™
    > ğŸ’¡ ì›¹ ì½˜ì†”ì´ ì‹¤í–‰ì´ ë˜ì§€ ì•Šì„ ë–„ test í´ë”ì— ìˆëŠ” application.propertiesë¥¼ ìˆ˜ì •í•œê±´ ì•„ë‹Œì§€ í™•ì¸