**스프링 시큐리티**

- 막강한 인증과 권한 부여(인가) 기능을 가진 프레임워크
- 사실상 스프링 기반의 애플리케이션에서는 보안을 위한 표준이라고 볼 수 있음
- 인터셉터, 필터 기반의 보안 기능을 구현하는 것보다 스프링 시큐리티를 통해 구현하는 것을 적극적으로 권장
- 확장성을 고려한 프레임워크다 보니 다양한 요구사항을 손쉽게 추가하고 변경할 수 있음
    - 특히, 스프링 부트 1.5에서 2.0으로 넘어오면서 더욱 더 강력해짐

<br>

### 스프링 시큐리티와 스프링 시큐리티 OAuth2 클라이언트

---

많은 서비스에서 로그인 기능을 id/pw 방식보다 구글, 페이스북, 네이버 같은 소셜 로그인 기능을 사용한다 <br>
왜냐? 직접 구현할 경우 배보다 배꼽이 커지는 경우가 많기 때문

직접 구현해야하는 것 (OAuth를 써도 직접 구현해야하는 것 제외) |
--- | 
로그인 시 보안 |
회원가입 시 이메일 혹은 전화번호 인증 |
비밀번호 찾기 |
비밀번호 변경 |
회원정보 변경  |

OAuth 로그인 구현 시 이 목록의 것들을 모두 구글, 페이스북, 네이버 등에 맡기고 서비스 개발에 집중 할 수 있음

- 스프링부트 1.5 vs 스프링 부트 2.0 스프링 부트 1.5에서의 Oauth2 연동 방법이 크게 변경되었지만 라이브러리 덕분에 설정 방법은 크게 차이가 없다 <br>

```properties
spring-security-oauth2-autoconfigure
```

이 라이브러리를 사용할 경우 스프링부트 2에서도 1.5에서 쓰던 설정을 그대로 사용할 수 있다. <br>
기존에 안전하게 작동하던 코드를 사용하는 것이 더 확실하기에 많은 개발자들이 이 방식을 사용해왔다 <br>
하지만 여기서는 아래의 이유로 스프링 부트 2 방식인 Spring Security Oauth2 Clinent 라이브러리를 사용해서 설정

- 스프링 팀에서 기존에 1.5에서 사용되던 spring-security-oauth2-autoconfigure 프로젝트는 유지상태로 결정했으면 더이상의 신규 기능은 추가하기 않고 버그 수정 정도의 기능만 추가될
  예정, 신규 기능은 새 oauth2 라이브러리에서만 지원
- 스프링 부트용 라이브러리 출시(starter)
- 기존에 사용되던 방식을 확장 포임트가 적절하게 오픈되어 있지않아 직접 상속하거나 오버라이딩 해야 하고 신규 라이브러리의 경우 확장 포인트를 고려해서 설계된 상태

> 스프링 부트 2 방식의 자료를 찾고 싶은 경우 확인해볼 것
>
> 1. spring-security-oauth2-autoconfigure 라이브러리를 썻는지 확인 <br>
> 2. application.properties 혹은 application.yml 정보가 다음과 차이가 있는지 확인 
>   - 스프링 부트 1.5 : url 주소 명시
>    - 스프링 부트 2.0 : client 인증 정보만 입력
> 
> 1.5버전에서 직정 입력했던 값들은 2.0에서 모두 enum으로 대체 <br>
> **CommonOAuth2Provider** 라는 enum이 새롭게 추가되어 구글, 깃허브, 페이스북, 옥타의 기본 설정값 제공 <br>
> 이 외의 소셜 로그인은 직접 추가해주면 된다

[comment]: <> ( <br>)

[comment]: <> (### 구글 서비스 등록)

[comment]: <> (---)

[comment]: <> (**구글 서비스에 신규 서비스 생성**)

[comment]: <> (- 발급된 인증 정보로 로그인 기능과 소셜 서비스 기능 사용 가능)

[comment]: <> (1. [https://console.cloud.google.com/]&#40;https://console.cloud.google.com/&#41; 로 이동)

[comment]: <> (2. [프로젝트 선택] 탭 클릭하여 페이지 이동 후 [새 프로젝트] 클릭)

[comment]: <> (3. 등록될 서비스 이름 입력)

[comment]: <> (   ![새 프로젝트 선택]&#40;img/5_새%20프로젝트%20선택.png&#41;)


[comment]: <> (- ![img_5.png]&#40;img/img_5.png&#41;)

[comment]: <> (- ![img_6.png]&#40;img/img_6.png&#41;)

[comment]: <> (- ![img_7.png]&#40;img/img_7.png&#41;)

[comment]: <> (- ![img_8.png]&#40;img/img_8.png&#41;)

[comment]: <> (- ![img_9.png]&#40;img/img_9.png&#41;)

[comment]: <> (- ![img_10.png]&#40;img/img_10.png&#41;)

[comment]: <> (> 이름이 계정 이름이 아닌 OS 사용자 이름으로 뜨는 경우)

[comment]: <> (> - IndexController의 addmodel.addAttribute&#40;"userName", user.getName&#40;&#41;&#41;; 부분에서 "userName"을 "userNames"로 바꿨다. &#40;index.mustache도 따라서 userName -> userNames로&#41;)

[comment]: <> (    > userName이라는 이름을 스프링 부트나. 다른 곳에서 사용하고 있기 때문에 충돌난 것이 아닌가 싶다. db에는 변경 없이도 문제 없이 저장된다.)